HI

IN THIS PROJECT I HAVE BEEN TASKED TO INSTALL KUBERNETES CLUSTER USING VAGRANT AND CONFIGURATION MANAGEMENT TOOL ANSIBLE. AFTER THAT I INTRUCTED TO SET MENTRIC SERVER AND KUBERNETES DASHBOARD. LET'S BEGIN.


***INSTALLING VAGRANT***

 FOR MY LAB I INSTALLED VAGRANT ON A UBUNTU 18.04 SERVER. FOR INSTALLING VAGRANT FOLLOW THE BELOW INSTRUCTION:

CURL -FSSL HTTPS://APT.RELEASES.HASHICORP.COM/GPG | SUDO APT-KEY ADD -
SUDO APT-ADD-REPOSITORY "DEB [ARCH=AMD64] HTTPS://APT.RELEASES.HASHICORP.COM $(LSB_RELEASE -CS) MAIN"
SUDO APT-GET UPDATE && SUDO APT-GET INSTALL VAGRANT

AS A VAGRANT PROVIDER I HAVE USED ORACLE VIRTUAL BOX. SO I INSTALLED ALSO IT IN MY BASE SYSTEM.

 
***CREATING A VAGRANTFILE***

NOW CREATE A DIRECTORY NAMED RAZIB_HASAN AND INSIDE IT CREATE ANOTHER DIRECTORY NAMED PROJECT-2 AND CREATED A VAGRANTFILE THERE. NOW ADD THE BELOW LINE OF CODE THERE. 

<CHECK THE VAGRANT FILE IN THE PROJECT-2/KUBERNETES-SETUP>

***NOW CREATE AN ANSIBLE PLAYBOOK FOR KUBERNETES MASTER***

CREATE A DIRECTORY NAMED KUBERNETES-SETUP IN THE SAME DIRECTORY AS THE VAGRANTFILE. CREATE TWO FILES NAMED MASTER-PLAYBOOK.YML AND NODE-PLAYBOOK.YML IN THE DIRECTORY KUBERNETES-SETUP.

IN THE FILE MASTER-PLAYBOOK.YML, ADD THE CODE BELOW.

<CHECK THE MASTER-PLYBOOK.YML FILE IN THE FOLDER>


***CREATE THE ANSIBLE PLAYBOOK FOR KUBERNETES NODE***

CREATE A FILE NAMED NODE-PLAYBOOK.YML IN THE DIRECTORY KUBERNETES-SETUP.

ADD THE CODE BELOW INTO NODE-PLAYBOOK.YML

<CHECK THE NODE-PLAYBOOK.YML FILE IN THE PROJECT-2//KUBERNETES-SETUP>



***UPON COMPLETING THE VAGRANTFILE AND PLAYBOOKS FOLLOW THE BELOW STEPS***

GO TO THE DIRECTORY RAZIB_HASAN/PROJECT-2/ AND THEN RUN "VAGRANT UP"

YOUR 1 MASTER 2 WORKER NODE KUBERNETES CLUSTER WILL BE INSTALLED. NOW WE WILL INSTALL KUBERNETES DASHBOARD AND METRIC SERVER. 

***DASHBOARD INSTALLAION***
SSH INTO YOUR MASTERNODE BY RUNNIG THIS COMMAND VAGRANT SSH K8S-MASTER AND THEN RUN THE BELOW SNIPPET.

KUBECTL APPLY -F HTTPS://RAW.GITHUBUSERCONTENT.COM/KUBERNETES/DASHBOARD/V2.2.0/AIO/DEPLOY/RECOMMENDED.YAML

AFTER THAT RUN "KUBECTL PROXY" COMMAND FROM THE NODE YOU WANT TO VIEW THE DASHBOASH
YOU CAN SEE THE DASHBOARD BY THIS LINK: 
HTTP://LOCALHOST:8001/API/V1/NAMESPACES/KUBERNETES-DASHBOARD/SERVICES/HTTPS:KUBERNETES-DASHBOARD:/PROXY/



***METRIC SERVER INSTALLATION***

FOR THIS SSH INTO THE MASTER NODE AND RUN THIS COMMAND. "GIT CLONE HTTPS://GITHUB.COM/KODEKLOUDHUB/KUBERNETES-METRICS-SERVER.GIT"
THIS WILL DOWNLOAD ALL THE FILES NEEDED FOR METRIC SERVER. 
AFTER THAT GO TO THE DIRECTORY NAMED KUBERNETES-METRICS-SERVER AND RUN "KUBECTL APPLY -F ."

THIS INSTALL ALL THE NECESSARY KUBERNETES OBJECTS FOR METRIC SERVER. NOW CREATE SOME PODS AND WAIT FOR SOMETIME TO LOAD THE METRIC SERVER. 
AFTER A WHILE RUN "KUBECTL TOP PODS" TO VIEW THE RESOURCE CONSUMPTION OF YOUR POD AND "KUBECTL TOP NODES" FOR NODE RESOURCE CONSUMPTION. 


